/* LikeScrollbar component for jQuery ( AMD Module ) | MIT Licenses | 2013-11-19 */
define(["../../drag/js/drag.min"],function(){var l={axis:"y",left:0,top:0};$.fn.wheel=function(a,c){var b=$.browser.mozilla?"DOMMouseScroll":"mousewheel",g=function(a){a=a.originalEvent;var b={};"wheelDelta"in a?b.wheelDelta=Math.round(a.wheelDelta):"detail"in a&&(b.wheelDelta=40*-a.detail);return b};if("on"===a)this.on(b,function(a){$.extend(a,g(a));c.call(this,a)});else"off"===a&&this.off(b,c)};var d={create:function(a,c){var b="y"===a.axis;a.scrollbarElem=$('<div class="ecope_likescrollbar" style="position:absolute;"><div class="lsb_track" style="position:absolute;top:0px;left:0px;z-index:1;overflow:hidden;'+
(b?"height:100%":"width:100%")+'"></div><div class="lsb_thumb" style="position:absolute;z-index:2;cursor:pointer;overflow:hidden;'+(b?"top:0px":"left:0px")+'"></div></div>').appendTo(document.body);a.trackElem=a.scrollbarElem.find(".lsb_track");a.thumbElem=a.scrollbarElem.find(".lsb_thumb")},position:function(a){var c="y"===a.axis,b=c?"innerHeight":"innerWidth",g=c?"outerWidth":"outerHeight",f=c?"height":"width",h=a.target,e=h.offset(),d=e.top,e=e.left,b=h[b](),k=h[g](),g=h[0][c?"scrollHeight":"scrollWidth"],
l=h[0][c?"scrollTop":"scrollLeft"],h=Math.round(b/g*b/2);if(b===g)return a.scrollbarElem.remove(),!1;d=c?{height:b+"px",left:e+k-17+a.left+"px",top:d+a.top+"px"}:{width:b+"px",top:d+k-17+a.top+"px",left:e+a.left+"px"};a.scrollSize=b-h;a.ratio=(g-b)/a.scrollSize;e=Math.round(l/a.ratio);a.scrollbarElem.css(d);a.thumbElem.css(f,h+"px").css(c?"top":"left",e+"px");return!0},bindWheel:function(a,c){a.target.wheel("on",function(b){var g=a.thumbElem,f="y"===a.axis,d=f?"scrollTop":"scrollLeft",f=f?"top":"left",
e=parseInt(g.css(f)),e=0>b.wheelDelta?e+15:e-15,e=0>e?0:e>a.scrollSize?a.scrollSize:e;g.css(f,e+"px");this[d]=Math.round(e*a.ratio);c.scroll=e;a.target.trigger("likescroll");b.preventDefault()})},bindDrag:function(a,c){var b="y"===a.axis,g=a.ratio,f=a.target,d=f[0];a.drag=new $.ui.Drag(a.thumbElem,{axis:a.axis,container:a.scrollbarElem,moveHand:!1});a.drag.on("drag",function(){var a=b?this.top:this.left;d[b?"scrollTop":"scrollLeft"]=Math.round(a*g);c.scroll=a;f.trigger("likescroll")}).on("dragstart",
function(){f.trigger("likescrollstart")}).on("dragend",function(){f.trigger("likescrollend")})},init:function(a,c){a.target.css("overflow","hidden");d.create(a);d.position(a)&&(d.bindDrag(a,c),d.bindWheel(a,c))}},k=function(a,c){a=$(a).eq(0);c=c||{};if(a.length){var b=$.extend({},l,c);b.target=a;this.__o__=b;d.init(b,this)}};k.prototype={resize:function(){var a=this.__o__;a.drag.destroy();d.position(a)&&d.bindDrag(a,this)},destroy:function(){if(this.__o__){var a=this.__o__;a.drag.destroy();a.scrollbarElem.remove();
a.target.css("overflow","").off("likescrollstart likescroll likescrollend").wheel("off");this.__o__=null;delete this.__o__}},on:function(a,c){if(!this.__o__)return this;var b=this,d=b.__o__;d.target.on("like"+a,function(f){f.type=a;f.target=d.scrollbarElem[0];c.call(b,f);f.stopPropagation()});return this},un:function(a){this.__o__&&this.__o__.target.off("like"+a);return this}};$.ui||($.ui={});$.ui.LikeScrollbar=k});
