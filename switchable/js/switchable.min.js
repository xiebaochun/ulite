/* Switchable component for jQuery ( AMD Module ) | MIT Licenses | 2013-10-27 */
define(function(){var y={auto:!0,interval:3E3,duration:600,index:!0,nav:!0,effects:"fade",imglazyload:!1,easing:"swing",init:null};$.browser.msie&&"6.0"===$.browser.version&&document.execCommand("BackgroundImageCache",!1,!0);var d={switchHandle:function(a,c){var b=a.effects,h=!1,g="number"===typeof c?c:$(c).attr("data-index"),e=d.patterns[b];void 0===g&&(h=~c.className.indexOf("prev")?!0:!1);"fade"!==b?a.listElem.is(":animated")&&a.listElem.stop(!0,!0):a.itemElem.filter(":animated").stop(!0,!0);e(a,
g,h)},loadImg:function(a){$("img",a).each(function(){var a=$(this),b=a.attr("data-lazysrc");b&&(this.src=b,a.removeAttr("data-lazysrc"))})},initIndex:function(a){for(var c=0,b="",h=a.itemElem.length,g=a.index,e;c<h;c++)b+='<a href="#"'+(0===c?' class="current"':"")+(g?"":' style="display:none"')+' data-index="'+c+'">'+(c+1)+"</a>";c=$('<div class="sc_index">'+b+"</div>").appendTo(a.target).find("a");if(g)c.on("mouseover.switchable",function(){var b=this;e=setTimeout(function(){d.switchHandle(a,b)},
200)}).on("mouseout.switchable",function(){clearTimeout(e);e=null}).on("click.switchable",function(a){a.preventDefault()});return c},initNav:function(a){var c=a.target,b;a.nav?(b=$('<a href="#" class="sc_prev" style="display:none"></a><a href="#" class="sc_next" style="display:none"></a>').appendTo(c),c.on("mouseenter.switchable",function(){b.show()}).on("mouseleave.switchable",function(){b.hide()})):b=$("a.sc_prev,a.sc_next",c);b.on("click.switchable",function(b){d.switchHandle(a,this);b.preventDefault()});
return b},initLayout:function(a){var c=a.itemElem,b=c.outerWidth(),h=c.outerHeight(),g=a.effects,e,f,k;"slideX"===g?(e=b,f="width",k="left"):"slideY"===g&&(e=h,f="height",k="none");a.containerElem.css({overflow:"hidden",position:"relative",width:b+"px",height:h+"px"});a.listElem.css(f,e*c.length+"px").css({position:"absolute",top:"0px",left:"0px"});c.css({"float":k,display:"block"});return e},clear:function(a){clearInterval(a.timer);a.timer=null},autoRun:function(a){a.timer=setInterval(function(){d.patterns[a.effects](a,
void 0,!1)},a.interval)},patterns:{fade:function(a,c,b){var h=a.itemElem,g=a.indexElem,e=parseInt(g.filter(".current").attr("data-index")),f=h.length-1,k,d;e!==c&&(void 0===c&&(c=!b?e===f?0:e+1:0===e?f:e-1),k=h.eq(e),d=h.eq(c),d.css("display","block").trigger("loadimg").next().trigger("loadimg"),k.fadeOut(a.duration,a.easing,function(){k.css("zIndex","1");d.css("zIndex","2");a.target.trigger("likechange")}),g.eq(e).removeClass("current"),g.eq(c).addClass("current").trigger("likeinit"))}}};$.each({slideX:["left",
"width"],slideY:["top","height"]},function(a,c){var b=c[0],h=c[1];d.patterns[a]=function(a,c,f){var d=a.itemElem,p=a.listElem,s=a.indexElem,t=d.length-1,l=parseInt(s.filter(".current").attr("data-index")),r=a.size,u=parseFloat(p.css(h)),q=parseFloat(p.css(b)),m=1,x={},n,v,w=function(){a.target.trigger("likechange")};l!==c&&(void 0!==c?c>l?(f=!1,m=c-l):(f=!0,m=l-c):c=!f?l===t?0:l+1:0===l?t:l-1,m*=r,f?(q+=m,0===l&&(n=d.last(),v="-"+u+"px",w=function(){p.css(b,"-"+(u-r)+"px");n.css("position","").css(b,
"");a.target.trigger("likechange")})):(q-=m,l===t&&(n=d.first(),v=u+"px",w=function(){p.css(b,"0px");n.css("position","").css(b,"");a.target.trigger("likechange")})),x[b]=q+"px",n&&n.css("position","relative").css(b,v),p.animate(x,a.duration,a.easing,w),d.eq(c).trigger("loadimg").next().trigger("loadimg"),s.eq(l).removeClass("current"),s.eq(c).addClass("current").trigger("likeinit"))}});var r=function(a,c){a=$(a).eq(0);c=c||{};if(a.length){var b=$.extend({},y,c),h=a.children("div.sc_container"),g=
h.children("ul"),e=g.children("li"),f=b.effects,k=d;if(!(2>e.length)){b.containerElem=h;b.target=a;b.listElem=g;b.itemElem=e;"fade"!==f?b.size=k.initLayout(b):b.itemElem.css({position:"absolute",display:"none",zIndex:"1",top:"0px",left:"0px"}).eq(0).css({display:"block",zIndex:"2"});b.indexElem=k.initIndex(b);b.navElem=k.initNav(b);if(b.imglazyload)e.slice(2).one("loadimg",function(){k.loadImg(this)});b.init&&(b.init.call(a[0]),delete b.init);b.auto&&(a.on("mouseenter.switchable",function(){d.clear(b)}).on("mouseleave.switchableauto",
function(){d.autoRun(b)}),d.autoRun(b));this.__o__=b}}};r.prototype={destroy:function(){if(this.__o__){var a=this.__o__,c=a.target;a.auto&&d.clear(a);c.off("mouseenter.switchable mouseleave.switchable mouseleave.switchableauto likechange");a.nav&&a.navElem.remove();a.index&&a.indexElem.remove();a.imglazyload&&a.itemElem.slice(2).off("loadimg");this.__o__=null;delete this.__o__}},on:function(a,c){if(!this.__o__)return this;var b=this,d=b.__o__,g="init"===a,e=d.indexElem;(g?e.not(".current"):d.target)[g?
"one":"on"]("like"+a,function(f){f.index=e.filter(".current").attr("data-index");f.target=d.itemElem[f.index];f.type=a;c.call(b,f);f.stopPropagation()});return this},un:function(a){this.__o__&&this.__o__.target.off("like"+a);return this},change:function(a){this.__o__&&d.switchHandle(this.__o__,+a)},pause:function(){var a=this.__o__;a&&(d.clear(a),a.auto&&a.target.off("mouseleave.switchableauto"))},play:function(){var a=this.__o__;if(a&&(d.autoRun(a),a.auto))a.target.on("mouseleave.switchableauto",
function(){d.autoRun(a)})}};$.ui||($.ui={});$.ui.Switchable=r});
